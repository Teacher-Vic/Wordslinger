<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Wordslinger</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #faf9f6;
  padding: 20px;
  max-width: 600px;
  margin: auto;
  color: #222;
}
h1 { text-align: center; }

select, button {
  font-size: 16px;
  padding: 10px;
  margin: 8px 0;
  width: 100%;
}

.word-box, .favorites-box {
  background: white;
  border-radius: 10px;
  padding: 18px;
  margin-top: 15px;
  box-shadow: 0 0 6px rgba(0,0,0,0.1);
}

.example {
  margin-left: 15px;
  opacity: 0.9;
}

.buttons {
  display: flex;
  justify-content: space-between;
  margin-top: 12px;
}
.buttons button { width: 48%; }

#favoritesPage { display: none; }

/* ‚≠ê Small trash icon */
.removeBtn {
  position: absolute;
  bottom: 6px;
  right: 6px;
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  opacity: 0.6;
}
.removeBtn:hover { opacity: 1; }
</style>
</head>
<body>

<h1>Wordslinger</h1>

<button id="goMain">Learning Mode</button>
<button id="goFavs">‚òÖ Favorites</button>

<!-- MAIN -->
<div id="mainPage">
  <label>Choose Level:</label>
  <select id="level">
    <option value="beginner">Beginner</option>
    <option value="journey">Journey</option>
    <option value="advanced">Advanced</option>
    <option value="master">Master</option>
  </select>

  <div class="word-box" id="display"></div>

  <div class="buttons">
    <button id="favBtn">‚òÖ Favorite</button>
    <button id="newBtn">New Word</button>
  </div>
</div>

<!-- FAVORITES -->
<div id="favoritesPage">
  <h2>Your Favorite Words ‚òÖ</h2>
  <div id="favoritesList" class="favorites-box">(No favorites yet)</div>
</div>

<script>
/* WORD LISTS (unchanged ‚Äî trimmed for readability here ‚Äî yours remain intact!) */
const words = {YOUR_WORD_LISTS_HERE}; // <-- your entire `words = {...}` stays exactly the same.

let history = JSON.parse(localStorage.getItem("history_words")) || [];
let favorites = JSON.parse(localStorage.getItem("favorite_words")) || [];
let currentWord = null;

/* Example generator */
function makeExample(word, type) {
  const templates = {
    noun: [
      `I saw a ${word} today.`,
      `The ${word} was on the table.`,
      `She talked about the ${word} in class.`
    ],
    verb: [
      `I will ${word} later.`,
      `They decided to ${word} together.`,
      `Try to ${word} if you can.`
    ],
    adjective: [
      `The weather is very ${word} today.`,
      `She seems ${word} this morning.`,
      `That was a ${word} idea.`
    ],
    default: [
      `This is an example using the word "${word}".`
    ]
  };
  const group = templates[type] || templates.default;
  return group[Math.floor(Math.random()*group.length)];
}

/* Generate new word */
async function newWord() {
  const lvl = document.getElementById("level").value;
  const pool = words[lvl];
  const chosen = pool[Math.floor(Math.random()*pool.length)];

  const res = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${chosen}`);
  const data = await res.json();
  const entry = data[0];
  const meaning = entry.meanings[0];
  const type = meaning.partOfSpeech;
  const definition = meaning.definitions[0].definition;

  let examples = [];
  entry.meanings.forEach(m => m.definitions.forEach(d => { if (d.example) examples.push(d.example); }));
  if (examples.length === 0) {
    examples = [
      makeExample(entry.word, type),
      makeExample(entry.word, type),
      makeExample(entry.word, type)
    ];
  }

  currentWord = { word: entry.word, type, def: definition, ex: examples.slice(0,3) };
  history.push(currentWord.word);
  localStorage.setItem("history_words", JSON.stringify(history));
  displayWord();
}

function displayWord() {
  document.getElementById("display").innerHTML = `
    <strong>Word:</strong> ${currentWord.word}<br>
    <strong>Level:</strong> ${document.getElementById("level").value}<br>
    <strong>Part of Speech:</strong> ${currentWord.type}<br>
    <strong>Definition:</strong> ${currentWord.def}<br><br>
    <strong>Examples:</strong><br>
    ${currentWord.ex.map(e => `<div class="example">‚Ä¢ ${e}</div>`).join("")}
  `;
}

/* ‚≠ê FAVORITES PAGE (full card view + alphabetical + async) */
async function renderFavorites() {
  const list = document.getElementById("favoritesList");

  if (favorites.length === 0) {
    list.innerHTML = "(No favorites yet)";
    return;
  }

  list.innerHTML = "Loading...";

  let cards = [];

  for (let word of [...favorites].sort((a,b)=>a.localeCompare(b))) {
    const res = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
    const data = await res.json();
    const entry = data[0];
    const meaning = entry.meanings[0];
    const type = meaning.partOfSpeech;
    const definition = meaning.definitions[0].definition;

    let examples = [];
    entry.meanings.forEach(m=>m.definitions.forEach(d=>{ if(d.example) examples.push(d.example); }));
    if(examples.length===0){
      examples=[
        makeExample(entry.word,type),
        makeExample(entry.word,type),
        makeExample(entry.word,type)
      ];
    }

    cards.push(`
      <div class="word-box" style="position:relative;">
        <strong>Word:</strong> ${entry.word}<br>
        <strong>Part of Speech:</strong> ${type}<br>
        <strong>Definition:</strong> ${definition}<br><br>
        <strong>Examples:</strong><br>
        ${examples.slice(0,3).map(e=>`<div class="example">‚Ä¢ ${e}</div>`).join("")}
        <button class="removeBtn" onclick="removeFavorite('${word}')">üóë</button>
      </div>
    `);
  }

  list.innerHTML = cards.join("");
}

function removeFavorite(word){
  favorites = favorites.filter(w=>w!==word);
  localStorage.setItem("favorite_words", JSON.stringify(favorites));
  renderFavorites();
}

/* Buttons */
document.getElementById("favBtn").onclick = function(){
  if(!currentWord) return;
  if(!favorites.includes(currentWord.word)) favorites.push(currentWord.word);
  localStorage.setItem("favorite_words", JSON.stringify(favorites));
  alert("Added to Favorites ‚òÖ");
};

document.getElementById("newBtn").onclick = newWord;

document.getElementById("goMain").onclick = function(){
  document.getElementById("mainPage").style.display="block";
  document.getElementById("favoritesPage").style.display="none";
};

document.getElementById("goFavs").onclick = function(){
  document.getElementById("mainPage").style.display="none";
  document.getElementById("favoritesPage").style.display="block";
  renderFavorites();
};
</script>

</body>
</html>
